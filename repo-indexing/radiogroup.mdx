# RadioGroup Components

## Overview

### Purpose

Use this component group to generate radio group functionality with required parent-child relationship

### When to Use

RadioGroup components are ideal for scenarios where users need to select exactly one option from a mutually exclusive set of choices. Use RadioGroup when:

- **Single Selection Required**: Users must choose only one option from multiple alternatives
- **Mutually Exclusive Options**: All choices are incompatible with each other (unlike checkboxes)
- **Form Input**: Collecting user preferences, settings, or configuration choices
- **Settings/Preferences**: Payment methods, shipping options, subscription plans
- **Surveys/Questionnaires**: Multiple choice questions with single answers
- **Filtering**: Category selection, sorting options, or view modes

### Architecture

**Critical/Strong Coupling**: The RadioGroup components have a required parent-child relationship where RadioGroupItem components must be descendants of a RadioGroup component to function properly. The architecture follows the Radix UI compound component pattern with shared context for state management.

### Component Interdependencies

- **Required Parent-Child Relationship**: RadioGroupItem must be used within RadioGroup
- **Shared Context Dependencies**: RadioGroup provides the selection context that RadioGroupItem consumes
- **State Management**: RadioGroup manages the selected value state, RadioGroupItem reports selection changes
- **Accessibility Context**: ARIA attributes and keyboard navigation are coordinated between components

## Components

### RadioGroup {Primary Component}

The root container component that provides context and manages the selection state for all radio group items.

**Purpose:** Establishes the radio group context, manages selected value state, and coordinates accessibility features across all child radio items.

**Interface:**

```typescript
interface RadioGroupProps
  extends React.ComponentProps<typeof RadioGroupPrimitive.Root> {
  className?: string;
  value?: string; // Currently selected value
  defaultValue?: string; // Initial selected value for uncontrolled usage
  onValueChange?: (value: string) => void; // Callback when selection changes
  disabled?: boolean; // Disables the entire radio group
  required?: boolean; // Makes the radio group required for form validation
  name?: string; // Form name attribute
  orientation?: "horizontal" | "vertical"; // Layout orientation
  dir?: "ltr" | "rtl"; // Text direction
  loop?: boolean; // Whether arrow key navigation wraps around
}
```

**Dependencies:** None - this is the root component
**Provides:** Selection state context, accessibility coordination, keyboard navigation management

**Usage Example:**

```tsx
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group";

function PaymentMethodSelector() {
  const [paymentMethod, setPaymentMethod] = useState("card");

  return (
    <RadioGroup
      value={paymentMethod}
      onValueChange={setPaymentMethod}
      className="space-y-2"
    >
      <RadioGroupItem value="card" id="card" />
      <RadioGroupItem value="paypal" id="paypal" />
      <RadioGroupItem value="bank" id="bank" />
    </RadioGroup>
  );
}
```

### RadioGroupItem {Dependent Component}

Individual radio button items that must be used within a RadioGroup context.

**Purpose:** Represents a single selectable option within the radio group, handling visual state and user interactions.

**Interface:**

```typescript
interface RadioGroupItemProps
  extends React.ComponentProps<typeof RadioGroupPrimitive.Item> {
  className?: string;
  value: string; // Required - the value this item represents
  disabled?: boolean; // Disables this specific item
  id?: string; // For label association
  required?: boolean; // Whether this item is required
}
```

**Context Dependencies:**

- Must be used within RadioGroup component
- Accesses selection state and change handlers from RadioGroup context
- Inherits accessibility attributes from parent RadioGroup

**Parent Requirements:** Must be a descendant of RadioGroup component for proper functionality

**Usage Example:**

```tsx
// Must be used within RadioGroup
<RadioGroup value={selectedValue} onValueChange={setValue}>
  <div className="flex items-center space-x-2">
    <RadioGroupItem value="option1" id="option1" />
    <label htmlFor="option1">Option 1</label>
  </div>
  <div className="flex items-center space-x-2">
    <RadioGroupItem value="option2" id="option2" />
    <label htmlFor="option2">Option 2</label>
  </div>
</RadioGroup>
```

## Integration Patterns

### Basic Usage

```tsx
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group";
import { Label } from "@/components/ui/label";

// Minimal required structure
function BasicRadioExample() {
  return (
    <RadioGroup defaultValue="option1">
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="option1" id="r1" />
        <Label htmlFor="r1">Default</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="option2" id="r2" />
        <Label htmlFor="r2">Comfortable</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="option3" id="r3" />
        <Label htmlFor="r3">Compact</Label>
      </div>
    </RadioGroup>
  );
}
```

### Advanced Usage

```tsx
// Controlled usage with validation and custom styling
function AdvancedRadioExample() {
  const [size, setSize] = useState<string>("");
  const [error, setError] = useState<string>("");

  const handleSizeChange = (value: string) => {
    setSize(value);
    setError(""); // Clear error on selection
  };

  const validateSelection = () => {
    if (!size) {
      setError("Please select a size");
      return false;
    }
    return true;
  };

  return (
    <div className="space-y-3">
      <RadioGroup
        value={size}
        onValueChange={handleSizeChange}
        className="grid grid-cols-3 gap-4"
        required
      >
        <div className="flex items-center space-x-2">
          <RadioGroupItem value="small" id="size-small" />
          <Label htmlFor="size-small" className="font-medium">
            Small
          </Label>
        </div>
        <div className="flex items-center space-x-2">
          <RadioGroupItem value="medium" id="size-medium" />
          <Label htmlFor="size-medium" className="font-medium">
            Medium
          </Label>
        </div>
        <div className="flex items-center space-x-2">
          <RadioGroupItem value="large" id="size-large" />
          <Label htmlFor="size-large" className="font-medium">
            Large
          </Label>
        </div>
      </RadioGroup>
      {error && <p className="text-sm text-destructive">{error}</p>}
    </div>
  );
}
```

### Common Variations

```tsx
// Horizontal layout
function HorizontalRadioGroup() {
  return (
    <RadioGroup defaultValue="yes" className="flex space-x-6">
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="yes" id="yes" />
        <Label htmlFor="yes">Yes</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="no" id="no" />
        <Label htmlFor="no">No</Label>
      </div>
    </RadioGroup>
  );
}

// Disabled state
function DisabledRadioGroup() {
  return (
    <RadioGroup defaultValue="option1" disabled>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="option1" id="d1" />
        <Label htmlFor="d1">Option 1 (Selected)</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="option2" id="d2" />
        <Label htmlFor="d2">Option 2</Label>
      </div>
    </RadioGroup>
  );
}

// With descriptions
function RadioGroupWithDescriptions() {
  return (
    <RadioGroup defaultValue="plan-free">
      <div className="space-y-2">
        <div className="flex items-center space-x-2">
          <RadioGroupItem value="plan-free" id="plan-free" />
          <div className="space-y-1">
            <Label htmlFor="plan-free" className="font-medium">
              Free Plan
            </Label>
            <p className="text-sm text-muted-foreground">
              Basic features for personal use
            </p>
          </div>
        </div>
        <div className="flex items-center space-x-2">
          <RadioGroupItem value="plan-pro" id="plan-pro" />
          <div className="space-y-1">
            <Label htmlFor="plan-pro" className="font-medium">
              Pro Plan
            </Label>
            <p className="text-sm text-muted-foreground">
              Advanced features for professionals
            </p>
          </div>
        </div>
      </div>
    </RadioGroup>
  );
}
```

## Component Relationships

### Data Flow

1. **User Interaction**: User clicks on a RadioGroupItem
2. **State Update**: RadioGroupItem notifies RadioGroup of the selection via onValueChange
3. **Context Update**: RadioGroup updates its internal state and propagates to all RadioGroupItem children
4. **Visual Update**: All RadioGroupItems re-render with updated selection state
5. **External Callback**: RadioGroup calls the external onValueChange callback if provided

### Context Sharing

- **Selection State**: RadioGroup maintains the currently selected value
- **Name Attribute**: All RadioGroupItems inherit the same name for form submission
- **Disabled State**: RadioGroup can disable all children, or individual items can be disabled
- **Accessibility**: ARIA attributes, role assignments, and keyboard navigation are coordinated

### Event Handling

- **Click Events**: RadioGroupItem handles click events and propagates selection to RadioGroup
- **Keyboard Navigation**: RadioGroup manages arrow key navigation between items
- **Focus Management**: Focus moves between RadioGroupItems following accessibility guidelines
- **Change Events**: Selection changes bubble up from RadioGroupItem to RadioGroup to external handlers

## Best Practices

### Usage Guidelines

- **Always use Labels**: Associate each RadioGroupItem with a descriptive Label for accessibility
- **Provide Clear Options**: Ensure radio button options are mutually exclusive and clearly differentiated
- **Use Controlled Components**: For forms and dynamic UIs, use controlled RadioGroup with value and onValueChange props
- **Group Related Options**: Only group truly related, mutually exclusive options in a single RadioGroup
- **Consider Default Selection**: Provide sensible default values to reduce user friction

### Accessibility

- **Label Association**: Use proper Label components with htmlFor attributes linking to RadioGroupItem ids
- **Keyboard Navigation**: Arrow keys navigate between options, Space selects the focused option
- **Screen Reader Support**: RadioGroup provides proper ARIA roles and announces selection state changes
- **Focus Management**: Focus indicators are visible and follow logical tab order
- **Required Field Indication**: Use aria-required and visible indicators for required radio groups

### Performance

- **Controlled vs Uncontrolled**: Use uncontrolled (defaultValue) for simple forms, controlled (value/onValueChange) for complex state management
- **Avoid Excessive Re-renders**: Memoize change handlers when passing them as props to prevent unnecessary re-renders
- **Minimal DOM Structure**: Keep RadioGroup items lightweight; avoid complex nested components within RadioGroupItem

## Common Patterns

### Pattern 1: Form Integration

```tsx
// Integration with react-hook-form
import { useForm, Controller } from "react-hook-form";

function FormWithRadioGroup() {
  const { control, handleSubmit } = useForm();

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <Controller
        name="size"
        control={control}
        rules={{ required: "Size selection is required" }}
        render={({ field, fieldState }) => (
          <div className="space-y-2">
            <Label className="text-base font-semibold">Select Size</Label>
            <RadioGroup value={field.value} onValueChange={field.onChange}>
              <div className="flex items-center space-x-2">
                <RadioGroupItem value="small" id="small" />
                <Label htmlFor="small">Small</Label>
              </div>
              <div className="flex items-center space-x-2">
                <RadioGroupItem value="medium" id="medium" />
                <Label htmlFor="medium">Medium</Label>
              </div>
              <div className="flex items-center space-x-2">
                <RadioGroupItem value="large" id="large" />
                <Label htmlFor="large">Large</Label>
              </div>
            </RadioGroup>
            {fieldState.error && (
              <p className="text-sm text-destructive">
                {fieldState.error.message}
              </p>
            )}
          </div>
        )}
      />
    </form>
  );
}
```

### Pattern 2: Dynamic Options

```tsx
// RadioGroup with dynamically generated options
function DynamicRadioGroup({ options, value, onChange }) {
  return (
    <RadioGroup value={value} onValueChange={onChange}>
      {options.map((option) => (
        <div key={option.value} className="flex items-center space-x-2">
          <RadioGroupItem
            value={option.value}
            id={option.value}
            disabled={option.disabled}
          />
          <Label
            htmlFor={option.value}
            className={option.disabled ? "text-muted-foreground" : ""}
          >
            {option.label}
          </Label>
          {option.description && (
            <p className="text-sm text-muted-foreground">
              {option.description}
            </p>
          )}
        </div>
      ))}
    </RadioGroup>
  );
}
```

### Pattern 3: Card-Style Selection

```tsx
// RadioGroup with card-style visual selection
function CardRadioGroup() {
  const [selected, setSelected] = useState("plan-1");

  return (
    <RadioGroup value={selected} onValueChange={setSelected}>
      <div className="grid gap-4 md:grid-cols-3">
        {plans.map((plan) => (
          <Label
            key={plan.value}
            htmlFor={plan.value}
            className={cn(
              "cursor-pointer rounded-lg border-2 p-4 transition-colors",
              selected === plan.value
                ? "border-primary bg-primary/5"
                : "border-muted hover:border-border",
            )}
          >
            <div className="flex items-center space-x-2">
              <RadioGroupItem value={plan.value} id={plan.value} />
              <div className="space-y-1">
                <div className="font-medium">{plan.name}</div>
                <div className="text-sm text-muted-foreground">
                  {plan.description}
                </div>
              </div>
            </div>
          </Label>
        ))}
      </div>
    </RadioGroup>
  );
}
```
